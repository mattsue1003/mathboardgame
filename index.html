<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸å­—åŠ æ¸›æ³•æ¡ŒéŠç”¢ç”Ÿå™¨</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        input[type="range"] {
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect, useCallback } = React;

        // Lucide åœ–ç¤ºçµ„ä»¶ï¼ˆå› ç‚º CDN ç’°å¢ƒä¸‹ React ç‰ˆ Lucide è¼‰å…¥è¼ƒè¤‡é›œï¼Œç›´æ¥ä½¿ç”¨ SVG æˆ– Icon å°è£ï¼‰
        const Icon = ({ name, className = "w-4 h-4" }) => {
            const [svg, setSvg] = useState('');
            useEffect(() => {
                if (window.lucide) {
                    const icon = lucide.icons[name];
                    if (icon) {
                        const svgString = icon.toSvg({ class: className });
                        setSvg(svgString);
                    }
                }
            }, [name, className]);
            return <span dangerouslySetInnerHTML={{ __html: svg }} className="inline-block" />;
        };

        const App = () => {
            const [mode, setMode] = useState('asymmetric'); // 'classic' æˆ– 'asymmetric'
            const [backImage, setBackImage] = useState(null);
            const [brandTitle, setBrandTitle] = useState("æ•¸å­—åŠ æ¸›æ³•æ¡ŒéŠ");
            const [isGenerating, setIsGenerating] = useState(false);
            
            const renderCanvasRef = useRef(null);
            const [frontPreviewUrl, setFrontPreviewUrl] = useState("");
            const [backPreviewUrl, setBackPreviewUrl] = useState("");

            const [sizes, setSizes] = useState({
                titleFontSize: 7,      // ç‰ŒèƒŒæ¨™é¡Œå­—é«” (mm)
                titleYOffset: 15,      // ç‰ŒèƒŒæ¨™é¡Œ Y ä½ç½® (mm)
                imageScale: 0.8,       // ç‰ŒèƒŒåœ–ç‰‡ç¸®æ”¾
                imageXOffset: 0,       // ç‰ŒèƒŒåœ–ç‰‡ X ä½ç§» (mm)
                imageYOffset: 0,       // ç‰ŒèƒŒåœ–ç‰‡ Y ä½ç§» (mm)
                mainNumSize: 45,       // ç‰Œé¢ä¸»æ•¸å­— (mm)
                modFontSize: 12,       // ç‰Œé¢ +- æ•¸å­— (mm)
                modCircleSize: 15,     // ç‰Œé¢ +- åœ“åœˆåŠå¾‘ (mm)
            });

            const config = {
                cardWidth: 90, 
                cardHeight: 130,
                rows: 2,
                cols: 2,
                ppi: 5, // æ¸²æŸ“è§£æåº¦å€ç‡
            };

            const getColor = (val) => {
                const v = Math.abs(val);
                if (v === 1) return '#16a34a'; // ç¶  (ç°¡å–®)
                if (v === 2) return '#2563eb'; // è— (ä¸­ç­‰)
                if (v === 3) return '#dc2626'; // ç´… (å›°é›£)
                return '#334155';
            };

            // --- æ ¸å¿ƒæ¸²æŸ“ï¼šæ­£é¢ ---
            const drawFrontCard = useCallback((canvas, card, s, currentMode) => {
                const ctx = canvas.getContext('2d');
                const scale = config.ppi;
                const w = config.cardWidth * scale;
                const h = config.cardHeight * scale;
                
                canvas.width = w;
                canvas.height = h;

                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, w, h);
                ctx.strokeStyle = '#d1d5db';
                ctx.lineWidth = 1 * scale;
                ctx.strokeRect(0, 0, w, h);

                // ä¸­å¤®ä¸»æ•¸å­—
                ctx.fillStyle = '#000000';
                ctx.font = `bold ${s.mainNumSize * scale}px sans-serif`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(card.main.toString(), w / 2, h / 2 + (5 * scale));

                const drawMarker = (x, y, value, isFlipped) => {
                    const radius = s.modCircleSize * scale;
                    const color = getColor(value);
                    ctx.save();
                    ctx.translate(x, y);
                    if (isFlipped) ctx.rotate(Math.PI);
                    
                    ctx.beginPath();
                    ctx.arc(0, 0, radius, 0, Math.PI * 2);
                    ctx.fillStyle = '#ffffff';
                    ctx.fill();
                    ctx.strokeStyle = color;
                    ctx.lineWidth = 2 * scale;
                    ctx.stroke();

                    ctx.fillStyle = color;
                    ctx.font = `bold ${s.modFontSize * scale}px sans-serif`;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    
                    let label;
                    if (currentMode === 'classic') {
                        label = `Â±${Math.abs(card.mod)}`;
                    } else {
                        label = value > 0 ? `+${value}` : `${value}`;
                    }
                    
                    ctx.fillText(label, 0, 1 * scale);
                    ctx.restore();
                };

                const offset = 22 * scale;
                if (currentMode === 'classic') {
                    const colorVal = card.mod;
                    drawMarker(w - offset, offset, colorVal, false);
                    drawMarker(offset, h - offset, colorVal, true);
                } else {
                    drawMarker(w - offset, offset, card.plus, false);
                    drawMarker(offset, h - offset, card.minus, true);
                }
                
                const activeColor = currentMode === 'classic' ? getColor(card.mod) : getColor(Math.max(Math.abs(card.plus), Math.abs(card.minus)));
                ctx.fillStyle = activeColor;
                ctx.fillRect(10 * scale, h - (4 * scale), w - (20 * scale), 2.5 * scale);
                
                return canvas.toDataURL('image/jpeg', 0.95);
            }, []);

            // --- æ ¸å¿ƒæ¸²æŸ“ï¼šèƒŒé¢ ---
            const drawBackCard = useCallback(async (canvas, imgData, title, s) => {
                const ctx = canvas.getContext('2d');
                const scale = config.ppi;
                const w = config.cardWidth * scale;
                const h = config.cardHeight * scale;
                canvas.width = w;
                canvas.height = h;

                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, w, h);
                ctx.strokeStyle = '#d1d5db';
                ctx.lineWidth = 1 * scale;
                ctx.strokeRect(0, 0, w, h);

                // æ¨™é¡Œç¹ªè£½
                if (title) {
                    ctx.fillStyle = '#4f46e5';
                    ctx.font = `bold ${s.titleFontSize * scale}px sans-serif`;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'top';
                    ctx.fillText(title, w / 2, s.titleYOffset * scale);
                }

                // åœ–ç‰‡ç¹ªè£½ (åŒ…å«ä½ç§»èˆ‡ç¸®æ”¾)
                if (imgData) {
                    const img = new Image();
                    img.src = imgData;
                    await new Promise(resolve => img.onload = resolve);

                    const baseAreaY = 30 * scale; 
                    const availW = (w - 20 * scale);
                    const availH = (h - baseAreaY - 10 * scale);

                    const ratio = img.width / img.height;
                    let dW, dH;
                    
                    if (ratio > availW / availH) {
                        dW = availW * s.imageScale; dH = (availW / ratio) * s.imageScale;
                    } else {
                        dH = availH * s.imageScale; dW = (availH * ratio) * s.imageScale;
                    }

                    const dX = (w - dW) / 2 + (s.imageXOffset * scale);
                    const dY = baseAreaY + (availH - dH) / 2 + (s.imageYOffset * scale);

                    const r = 6 * scale;
                    ctx.save();
                    ctx.beginPath();
                    const clipMargin = 8 * scale;
                    const clipW = w - clipMargin * 2;
                    const clipH = h - baseAreaY - clipMargin;
                    // ä½¿ç”¨ç›¸å®¹æ€§å¯«æ³•å¯¦ç¾ roundRect
                    if (ctx.roundRect) {
                        ctx.roundRect(clipMargin, baseAreaY, clipW, clipH, r);
                    } else {
                        ctx.rect(clipMargin, baseAreaY, clipW, clipH);
                    }
                    ctx.clip();
                    
                    ctx.drawImage(img, dX, dY, dW, dH);
                    ctx.restore();

                    ctx.strokeStyle = '#f1f5f9';
                    ctx.lineWidth = 0.5 * scale;
                    ctx.strokeRect(clipMargin, baseAreaY, clipW, clipH);
                }
                
                return canvas.toDataURL('image/jpeg', 0.95);
            }, []);

            useEffect(() => {
                const updatePreviews = async () => {
                    if (!renderCanvasRef.current) return;
                    const exampleCard = mode === 'classic' ? { main: 7, mod: 2 } : { main: 7, plus: 2, minus: -1 };
                    const front = drawFrontCard(renderCanvasRef.current, exampleCard, sizes, mode);
                    setFrontPreviewUrl(front);
                    const back = await drawBackCard(renderCanvasRef.current, backImage, brandTitle, sizes);
                    setBackPreviewUrl(back);
                };
                updatePreviews();
            }, [sizes, backImage, brandTitle, mode, drawFrontCard, drawBackCard]);

            const generateDeck = () => {
                const deck = [];
                if (mode === 'classic') {
                    const distribution = [
                        { main: 1, mods: { 1: 2, 2: 2, 3: 1 } },
                        { main: 2, mods: { 1: 3, 2: 3, 3: 1 } },
                        { main: 3, mods: { 1: 4, 2: 3, 3: 1 } },
                        { main: 4, mods: { 1: 4, 2: 3, 3: 1 } },
                        { main: 5, mods: { 1: 4, 2: 4, 3: 2 } },
                        { main: 6, mods: { 1: 4, 2: 3, 3: 1 } },
                        { main: 7, mods: { 1: 4, 2: 3, 3: 1 } },
                        { main: 8, mods: { 1: 3, 2: 3, 3: 1 } },
                        { main: 9, mods: { 1: 2, 2: 2, 3: 2 } },
                        { main: 10, mods: { 1: 2, 2: 2, 3: 2 } },
                    ];
                    distribution.forEach(item => {
                        Object.entries(item.mods).forEach(([mod, count]) => {
                            for (let i = 0; i < count; i++) deck.push({ main: item.main, mod: parseInt(mod) });
                        });
                    });
                } else {
                    const types = [
                        { p: 1, m: -2, count: 25 }, 
                        { p: 2, m: -1, count: 25 }, 
                        { p: 3, m: -2, count: 12 }, 
                        { p: 2, m: -3, count: 11 }, 
                    ];
                    for (let num = 1; num <= 10; num++) {
                        types.forEach(t => {
                            const cardsForNum = Math.ceil(t.count / 10);
                            for(let i=0; i<cardsForNum && deck.length < 73; i++) {
                                deck.push({ main: num, plus: t.p, minus: t.m });
                            }
                        });
                    }
                }
                return deck.sort(() => Math.random() - 0.5).slice(0, 72); // A4 å…©é¢å‰›å¥½æ˜¯ 4 çš„å€æ•¸
            };

            const exportPDF = async () => {
                setIsGenerating(true);
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF('p', 'mm', 'a4');
                    const deck = generateDeck();
                    const cardsPerPage = config.rows * config.cols;
                    const totalPages = Math.ceil(deck.length / cardsPerPage);
                    const marginX = (210 - (config.cols * config.cardWidth)) / 2;
                    const marginY = (297 - (config.rows * config.cardHeight)) / 2;

                    // ç¹ªè£½æ­£é¢
                    for (let p = 0; p < totalPages; p++) {
                        if (p > 0) doc.addPage();
                        const pageCards = deck.slice(p * cardsPerPage, (p + 1) * cardsPerPage);
                        for (let index = 0; index < pageCards.length; index++) {
                            const col = index % config.cols;
                            const row = Math.floor(index / config.cols);
                            const x = marginX + col * config.cardWidth;
                            const y = marginY + row * config.cardHeight;
                            const cardImg = drawFrontCard(renderCanvasRef.current, pageCards[index], sizes, mode);
                            doc.addImage(cardImg, 'JPEG', x, y, config.cardWidth, config.cardHeight);
                        }
                    }

                    // ç¹ªè£½èƒŒé¢
                    const backImg = await drawBackCard(renderCanvasRef.current, backImage, brandTitle, sizes);
                    for (let p = 0; p < totalPages; p++) {
                        doc.addPage();
                        for (let i = 0; i < cardsPerPage; i++) {
                            const col = (config.cols - 1) - (i % config.cols); // èƒŒé¢æ°´å¹³å°èª¿
                            const row = Math.floor(i / config.cols);
                            const x = marginX + col * config.cardWidth;
                            const y = marginY + row * config.cardHeight;
                            if ((p * cardsPerPage + i) < deck.length) {
                                doc.addImage(backImg, 'JPEG', x, y, config.cardWidth, config.cardHeight);
                            }
                        }
                    }
                    doc.save(`${brandTitle}_${mode}.pdf`);
                } catch (err) { 
                    console.error(err); 
                } finally { 
                    setIsGenerating(false); 
                }
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 pb-20">
                    <canvas ref={renderCanvasRef} className="hidden" />
                    
                    <header className="bg-white border-b sticky top-0 z-50 shadow-sm">
                        <div className="max-w-7xl mx-auto px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
                            <div className="flex items-center gap-3">
                                <div className="p-2 bg-indigo-600 rounded-xl shadow-lg text-white">
                                    <Icon name="sun" className="w-8 h-8" />
                                </div>
                                <div>
                                    <h1 className="text-2xl font-black text-indigo-900 leading-tight">æ•¸å­—åŠ æ¸›æ³•æ¡ŒéŠç”¢ç”Ÿå™¨</h1>
                                    <div className="flex gap-2 mt-1">
                                        <button onClick={()=>setMode('asymmetric')} className={`px-3 py-1 rounded-full text-[10px] font-bold uppercase transition-all shadow-sm ${mode==='asymmetric'?'bg-indigo-600 text-white':'bg-slate-100 text-slate-400 hover:bg-slate-200'}`}>éå°ç¨±æ¨¡å¼</button>
                                        <button onClick={()=>setMode('classic')} className={`px-3 py-1 rounded-full text-[10px] font-bold uppercase transition-all shadow-sm ${mode==='classic'?'bg-indigo-600 text-white':'bg-slate-100 text-slate-400 hover:bg-slate-200'}`}>ç¶“å…¸æ¨¡å¼</button>
                                    </div>
                                </div>
                            </div>
                            <button 
                                onClick={exportPDF}
                                disabled={isGenerating}
                                className={`flex items-center gap-3 px-10 py-4 rounded-2xl font-black text-xl transition-all shadow-xl hover:scale-105 active:scale-95 ${
                                    isGenerating ? 'bg-slate-200 text-slate-400' : 'bg-indigo-600 hover:bg-indigo-700 text-white'
                                }`}
                            >
                                {isGenerating ? <Icon name="refresh-cw" className="w-6 h-6 animate-spin" /> : <Icon name="download" className="w-6 h-6" />}
                                {isGenerating ? 'åŒæ­¥æ¸²æŸ“ä¸­...' : 'ä¸‹è¼‰ PDF'}
                            </button>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto px-6 mt-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        <div className="lg:col-span-4 space-y-6">
                            <section className="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                                <h2 className="text-xl font-black mb-6 text-indigo-900 flex items-center gap-2 border-b pb-2">
                                    <Icon name="layers" className="w-6 h-6" /> éŠæˆ²æ¨¡å¼åˆ‡æ›
                                </h2>
                                <div className="grid grid-cols-2 gap-3">
                                    <div 
                                        onClick={()=>setMode('asymmetric')}
                                        className={`cursor-pointer p-4 rounded-2xl border-2 transition-all flex flex-col items-center text-center ${mode==='asymmetric'?'border-indigo-600 bg-indigo-50 shadow-md scale-105':'border-slate-100 hover:border-indigo-200'}`}
                                    >
                                        <div className={`mb-2 ${mode==='asymmetric'?'text-indigo-600':'text-slate-300'}`}><Icon name="star" className="w-6 h-6" /></div>
                                        <p className="font-black text-xs text-indigo-900">éå°ç¨±æ¨¡å¼</p>
                                        <p className="text-[10px] text-slate-500 mt-1 italic leading-tight">åŠ æ¸›åˆ†é–‹æ¨™è¨˜</p>
                                    </div>
                                    <div 
                                        onClick={()=>setMode('classic')}
                                        className={`cursor-pointer p-4 rounded-2xl border-2 transition-all flex flex-col items-center text-center ${mode==='classic'?'border-indigo-600 bg-indigo-50 shadow-md scale-105':'border-slate-100 hover:border-indigo-200'}`}
                                    >
                                        <div className={`mb-2 ${mode==='classic'?'text-indigo-600':'text-slate-300'}`}><Icon name="layers" className="w-6 h-6" /></div>
                                        <p className="font-black text-xs text-indigo-900">ç¶“å…¸æ¨¡å¼</p>
                                        <p className="text-[10px] text-slate-500 mt-1 italic leading-tight">æ¨™æº– Â± æ¨™è¨˜</p>
                                    </div>
                                </div>
                            </section>

                            <section className="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                                <h2 className="text-xl font-black mb-6 text-indigo-900 flex items-center gap-2 border-b pb-2">
                                    <Icon name="image" className="w-6 h-6" /> ç‰ŒèƒŒèˆ‡å“ç‰Œé€²éš
                                </h2>
                                <div className="space-y-6">
                                    <div className="space-y-3">
                                        <label className="text-xs font-black text-slate-400 uppercase tracking-wider flex items-center gap-2">
                                            <Icon name="type" className="w-3 h-3" /> æ¨™é¡Œæ–‡å­—èˆ‡ä½ç½®
                                        </label>
                                        <input type="text" value={brandTitle} onChange={(e)=>setBrandTitle(e.target.value)} className="w-full p-2 rounded-lg bg-slate-50 border border-slate-200 outline-none font-bold mb-2" />
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <span className="text-[10px] font-bold text-slate-500 flex justify-between">å¤§å° <span>{sizes.titleFontSize}mm</span></span>
                                                <input type="range" min="3" max="15" step="0.5" value={sizes.titleFontSize} onChange={(e)=>setSizes({...sizes, titleFontSize:parseFloat(e.target.value)})} className="w-full accent-indigo-600" />
                                            </div>
                                            <div>
                                                <span className="text-[10px] font-bold text-slate-500 flex justify-between">å‚ç›´ä½ç½® <span>{sizes.titleYOffset}mm</span></span>
                                                <input type="range" min="5" max="40" step="0.5" value={sizes.titleYOffset} onChange={(e)=>setSizes({...sizes, titleYOffset:parseFloat(e.target.value)})} className="w-full accent-indigo-600" />
                                            </div>
                                        </div>
                                    </div>

                                    <div className="space-y-3 pt-4 border-t border-slate-50">
                                        <label className="text-xs font-black text-slate-400 uppercase tracking-wider flex items-center gap-2">
                                            <Icon name="move" className="w-3 h-3" /> åœ–ç‰‡ç¸®æ”¾èˆ‡ä½ç§» (è£åˆ‡)
                                        </label>
                                        <div className={`relative border-2 border-dashed rounded-xl p-3 text-center mb-4 ${backImage ? 'bg-green-50 border-green-200' : 'bg-slate-50 border-slate-200'}`}>
                                            {backImage ? (
                                                <div className="flex items-center justify-between px-2">
                                                    <div className="flex items-center gap-2">
                                                        <img src={backImage} className="w-10 h-10 object-cover rounded" alt="Thumb" />
                                                        <span className="text-[10px] font-bold text-green-600">åœ–ç‰‡å·²ä¸Šå‚³</span>
                                                    </div>
                                                    <button onClick={() => setBackImage(null)} className="text-[10px] text-red-500 font-bold underline">ç§»é™¤</button>
                                                </div>
                                            ) : (
                                                <label className="cursor-pointer block">
                                                    <span className="text-xs text-indigo-600 font-bold">é»æ­¤ä¸Šå‚³å“ç‰Œåœ–ç‰‡</span>
                                                    <input type="file" className="hidden" accept="image/*" onChange={(e) => {
                                                        const file = e.target.files[0];
                                                        if (file) {
                                                            const reader = new FileReader();
                                                            reader.onload = (ev) => setBackImage(ev.target.result);
                                                            reader.readAsDataURL(file);
                                                        }
                                                    }} />
                                                </label>
                                            )}
                                        </div>
                                        
                                        <div className="space-y-4">
                                            <div>
                                                <span className="text-[10px] font-bold text-slate-500 flex justify-between">ç¸®æ”¾æ¯”ä¾‹ <span>{Math.round(sizes.imageScale * 100)}%</span></span>
                                                <input type="range" min="0.1" max="3.0" step="0.05" value={sizes.imageScale} onChange={(e)=>setSizes({...sizes, imageScale:parseFloat(e.target.value)})} className="w-full accent-indigo-600" />
                                            </div>
                                            <div className="grid grid-cols-2 gap-4">
                                                <div>
                                                    <span className="text-[10px] font-bold text-slate-500 flex justify-between">æ°´å¹³ X <span>{sizes.imageXOffset}mm</span></span>
                                                    <input type="range" min="-100" max="100" step="1" value={sizes.imageXOffset} onChange={(e)=>setSizes({...sizes, imageXOffset:parseFloat(e.target.value)})} className="w-full accent-indigo-600" />
                                                </div>
                                                <div>
                                                    <span className="text-[10px] font-bold text-slate-500 flex justify-between">å‚ç›´ Y <span>{sizes.imageYOffset}mm</span></span>
                                                    <input type="range" min="-100" max="100" step="1" value={sizes.imageYOffset} onChange={(e)=>setSizes({...sizes, imageYOffset:parseFloat(e.target.value)})} className="w-full accent-indigo-600" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section className="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                                <h2 className="text-xl font-black mb-6 text-indigo-900 flex items-center gap-2 border-b pb-2">
                                    <Icon name="maximize" className="w-6 h-6" /> ç‰Œé¢å°ºå¯¸å¾®èª¿
                                </h2>
                                <div className="space-y-4">
                                    <div>
                                        <span className="text-[10px] font-bold text-slate-500 flex justify-between">ä¸­å¤®ä¸»æ•¸å­— <span>{sizes.mainNumSize}mm</span></span>
                                        <input type="range" min="20" max="80" step="1" value={sizes.mainNumSize} onChange={(e)=>setSizes({...sizes, mainNumSize:parseFloat(e.target.value)})} className="w-full accent-indigo-600" />
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <span className="text-[10px] font-bold text-slate-500 flex justify-between">æ¨™ç±¤æ•¸å­— <span>{sizes.modFontSize}mm</span></span>
                                            <input type="range" min="5" max="30" step="1" value={sizes.modFontSize} onChange={(e)=>setSizes({...sizes, modFontSize:parseFloat(e.target.value)})} className="w-full accent-indigo-600" />
                                        </div>
                                        <div>
                                            <span className="text-[10px] font-bold text-slate-500 flex justify-between">æ¨™ç±¤åœ“åœˆ <span>{sizes.modCircleSize}mm</span></span>
                                            <input type="range" min="8" max="25" step="1" value={sizes.modCircleSize} onChange={(e)=>setSizes({...sizes, modCircleSize:parseFloat(e.target.value)})} className="w-full accent-indigo-600" />
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>

                        <div className="lg:col-span-8 space-y-6">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div className="bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-200">
                                    <div className="flex justify-between items-center mb-4 px-2 font-black text-slate-400 text-sm italic underline underline-offset-4 decoration-indigo-200 uppercase">
                                        {mode} æ­£é¢
                                    </div>
                                    <div className="flex justify-center bg-slate-100 p-6 rounded-[2rem]">
                                        {frontPreviewUrl && <img src={frontPreviewUrl} className="w-56 h-auto shadow-2xl rounded-2xl" alt="Front" />}
                                    </div>
                                </div>
                                <div className="bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-200">
                                    <div className="flex justify-between items-center mb-4 px-2 font-black text-slate-400 text-sm italic underline underline-offset-4 decoration-indigo-200 uppercase">
                                        BRANDED ç‰ŒèƒŒ
                                    </div>
                                    <div className="flex justify-center bg-slate-100 p-6 rounded-[2rem]">
                                        {backPreviewUrl && <img src={backPreviewUrl} className="w-56 h-auto shadow-2xl rounded-2xl" alt="Back" />}
                                    </div>
                                </div>
                            </div>

                            <section className="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-200">
                                <h2 className="text-2xl font-black mb-6 text-indigo-900 flex items-center gap-3">
                                    <Icon name="book-open" className="w-7 h-7" /> {mode === 'classic' ? 'ç¶“å…¸ç‰ˆè©³ç´°ç©æ³•' : 'éå°ç¨±å¹³è¡¡ç‰ˆè©³ç´°ç©æ³•'}
                                </h2>
                                
                                <div className="space-y-8">
                                    <div className="flex gap-4 items-start">
                                        <div className="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-black shrink-0 shadow-lg shadow-indigo-100">1</div>
                                        <div>
                                            <h3 className="font-black text-slate-800 text-lg">éŠæˆ²æº–å‚™</h3>
                                            <p className="text-sm text-slate-600 leading-relaxed">
                                                å¹³å‡ç™¼çµ¦æ¯ä½ç©å®¶æ‰‹ç‰Œï¼Œç‰Œé¢æœä¸‹ã€‚ç¿»é–‹ä¸€å¼µã€Œèµ·å§‹ç‰Œã€æ”¾åœ¨ä¸­å¤®ã€‚å…¶é¤˜ç‰Œæ”¾å›ç›’å­ã€‚
                                            </p>
                                        </div>
                                    </div>

                                    <div className="flex gap-4 items-start">
                                        <div className="bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-black shrink-0 shadow-lg shadow-indigo-100">2</div>
                                        <div>
                                            <h3 className="font-black text-slate-800 text-lg">
                                                {mode === 'classic' ? 'å‡ºç‰Œè¦å‰‡ï¼šé›™å‘é‹ç®—' : 'å‡ºç‰Œè¦å‰‡ï¼šåˆ†å‘é‹ç®—'}
                                            </h3>
                                            <p className="text-sm text-slate-600 leading-relaxed">
                                                æ‰€æœ‰äºº<span className="text-indigo-600 font-bold underline decoration-wavy ml-1 mr-1">åŒæ™‚æ¶å¿«</span>ï¼Œä¸éœ€è¼ªæµã€‚å‡ºçš„ç‰Œå¿…é ˆç¬¦åˆï¼š<br/>
                                                {mode === 'classic' ? (
                                                    <span className="bg-slate-50 px-2 py-1 rounded font-bold border border-slate-100 inline-block mt-2">ä¸­å¤®æ•¸å­— Â± æ¨™ç±¤å€¼</span>
                                                ) : (
                                                    <span className="bg-slate-50 px-2 py-1 rounded font-bold border border-slate-100 inline-block mt-2">ä¸­å¤®æ•¸å­— + å³ä¸Šè§’å€¼ <span className="text-slate-300">æˆ–</span> ä¸­å¤®æ•¸å­— - å·¦ä¸‹è§’å€¼</span>
                                                )}
                                            </p>
                                        </div>
                                    </div>

                                    <div className="bg-amber-50 p-6 rounded-3xl border-l-8 border-amber-400 shadow-inner">
                                        <h4 className="font-black text-amber-800 mb-2 flex items-center gap-2 italic">
                                            ğŸ’¡ å¯¦æˆ°ç¯„ä¾‹ (Example):
                                        </h4>
                                        {mode === 'classic' ? (
                                            <div className="text-sm text-amber-900 font-medium">
                                                ä¸­å¤®ç‰Œæ˜¯ <span className="text-xl font-black mx-1">7</span>ï¼Œæ¨™ç±¤æ˜¯ <span className="font-bold underline">Â±2</span><br/>
                                                ğŸ‘‰ å¯å‡ºç‰Œï¼š<span className="bg-white px-3 py-0.5 rounded-lg border-2 border-amber-200 font-black mx-1 text-indigo-600">5</span> (7-2) æˆ– <span className="bg-white px-3 py-0.5 rounded-lg border-2 border-amber-200 font-black mx-1 text-indigo-600">9</span> (7+2)ã€‚
                                            </div>
                                        ) : (
                                            <div className="text-sm text-amber-900 font-medium leading-relaxed">
                                                ä¸­å¤®ç‰Œæ˜¯ <span className="text-xl font-black mx-1">7</span>ï¼Œå³ä¸Šæ˜¯ <span className="text-green-600 font-black underline">+2</span>ï¼Œå·¦ä¸‹æ˜¯ <span className="text-red-600 font-black underline">-1</span><br/>
                                                ğŸ‘‰ å¯å‡ºç‰Œï¼š<span className="bg-white px-3 py-0.5 rounded-lg border-2 border-amber-200 font-black mx-1 text-indigo-600">9</span> (7+2) æˆ– <span className="bg-white px-3 py-0.5 rounded-lg border-2 border-amber-200 font-black mx-1 text-indigo-600">6</span> (7-1)ã€‚
                                            </div>
                                        )}
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                                        <div className="p-5 bg-indigo-50/50 rounded-2xl border border-indigo-100">
                                            <h4 className="font-black text-indigo-900 mb-2 flex items-center gap-2"><Icon name="rotate-cw" className="w-4 h-4" /> æ•¸å­—å¾ªç’°</h4>
                                            æ•¸å­—ç¯„åœ 1-10ã€‚è‹¥ 10 + 1 è®Š 1ï¼›è‹¥ 1 - 2 è®Š 9ã€‚åƒæ—‹è½‰æœ¨é¦¬ä¸€æ¨£å¾ªç’°é‹ç®—ï¼
                                        </div>
                                        <div className="p-5 bg-indigo-50/50 rounded-2xl border border-indigo-100">
                                            <h4 className="font-black text-indigo-900 mb-2 flex items-center gap-2"><Icon name="check-circle-2" className="w-4 h-4" /> å¦‚ä½•ç²å‹</h4>
                                            æœ€å¿«å‡ºå®Œæ‰‹ç‰Œè€…ç²å‹ã€‚è¨˜å¾—å‡ºå®Œæœ€å¾Œä¸€å¼µè¦å¤§å–Šã€Œæˆ‘è´äº†ï¼ã€
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </main>

                    <footer className="text-center py-10 text-slate-300 font-bold text-sm tracking-widest uppercase">
                        Digital Teaching Tool Â· Brand Edition Â· 2026
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

        // åˆå§‹åŒ– Lucide åœ–ç¤º
        window.addEventListener('load', () => {
            if (window.lucide) {
                lucide.createIcons();
            }
        });
    </script>
</body>
</html>
